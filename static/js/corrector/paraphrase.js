var S=Object.defineProperty;var V=Object.getOwnPropertySymbols;var b=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var _=(n,e,r)=>e in n?S(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,Z=(n,e)=>{for(var r in e||(e={}))b.call(e,r)&&_(n,r,e[r]);if(V)for(var r of V(e))K.call(e,r)&&_(n,r,e[r]);return n};import{r as F,E as Y,j as s,P as ee,u as W,h as ne}from"./client.js";function p(){}p.prototype={diff:function(e,r){var t,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=u.callback;typeof u=="function"&&(o=u,u={});var i=this;function a(v){return v=i.postProcess(v,u),o?(setTimeout(function(){o(v)},0),!0):v}e=this.castInput(e,u),r=this.castInput(r,u),e=this.removeEmpty(this.tokenize(e,u)),r=this.removeEmpty(this.tokenize(r,u));var l=r.length,c=e.length,f=1,m=l+c;u.maxEditLength!=null&&(m=Math.min(m,u.maxEditLength));var x=(t=u.timeout)!==null&&t!==void 0?t:1/0,g=Date.now()+x,h=[{oldPos:-1,lastComponent:void 0}],d=this.extractCommon(h[0],r,e,0,u);if(h[0].oldPos+1>=c&&d+1>=l)return a(G(i,h[0].lastComponent,r,e,i.useLongestToken));var C=-1/0,E=1/0;function I(){for(var v=Math.max(C,-f);v<=Math.min(E,f);v+=2){var y=void 0,w=h[v-1],T=h[v+1];w&&(h[v-1]=void 0);var A=!1;if(T){var P=T.oldPos-v;A=T&&0<=P&&P<l}var B=w&&w.oldPos+1<c;if(!A&&!B){h[v]=void 0;continue}if(!B||A&&w.oldPos<T.oldPos?y=i.addToPath(T,!0,!1,0,u):y=i.addToPath(w,!1,!0,1,u),d=i.extractCommon(y,r,e,v,u),y.oldPos+1>=c&&d+1>=l)return a(G(i,y.lastComponent,r,e,i.useLongestToken));h[v]=y,y.oldPos+1>=c&&(E=Math.min(E,v-1)),d+1>=l&&(C=Math.max(C,v+1))}f++}if(o)(function v(){setTimeout(function(){if(f>m||Date.now()>g)return o();I()||v()},0)})();else for(;f<=m&&Date.now()<=g;){var z=I();if(z)return z}},addToPath:function(e,r,t,u,o){var i=e.lastComponent;return i&&!o.oneChangePerToken&&i.added===r&&i.removed===t?{oldPos:e.oldPos+u,lastComponent:{count:i.count+1,added:r,removed:t,previousComponent:i.previousComponent}}:{oldPos:e.oldPos+u,lastComponent:{count:1,added:r,removed:t,previousComponent:i}}},extractCommon:function(e,r,t,u,o){for(var i=r.length,a=t.length,l=e.oldPos,c=l-u,f=0;c+1<i&&l+1<a&&this.equals(t[l+1],r[c+1],o);)c++,l++,f++,o.oneChangePerToken&&(e.lastComponent={count:1,previousComponent:e.lastComponent,added:!1,removed:!1});return f&&!o.oneChangePerToken&&(e.lastComponent={count:f,previousComponent:e.lastComponent,added:!1,removed:!1}),e.oldPos=l,c},equals:function(e,r,t){return t.comparator?t.comparator(e,r):e===r||t.ignoreCase&&e.toLowerCase()===r.toLowerCase()},removeEmpty:function(e){for(var r=[],t=0;t<e.length;t++)e[t]&&r.push(e[t]);return r},castInput:function(e){return e},tokenize:function(e){return Array.from(e)},join:function(e){return e.join("")},postProcess:function(e){return e}};function G(n,e,r,t,u){for(var o=[],i;e;)o.push(e),i=e.previousComponent,delete e.previousComponent,e=i;o.reverse();for(var a=0,l=o.length,c=0,f=0;a<l;a++){var m=o[a];if(m.removed)m.value=n.join(t.slice(f,f+m.count)),f+=m.count;else{if(!m.added&&u){var x=r.slice(c,c+m.count);x=x.map(function(g,h){var d=t[f+h];return d.length>g.length?d:g}),m.value=n.join(x)}else m.value=n.join(r.slice(c,c+m.count));c+=m.count,m.added||(f+=m.count)}}return o}function H(n,e){var r;for(r=0;r<n.length&&r<e.length;r++)if(n[r]!=e[r])return n.slice(0,r);return n.slice(0,r)}function Q(n,e){var r;if(!n||!e||n[n.length-1]!=e[e.length-1])return"";for(r=0;r<n.length&&r<e.length;r++)if(n[n.length-(r+1)]!=e[e.length-(r+1)])return n.slice(-r);return n.slice(-r)}function k(n,e,r){if(n.slice(0,e.length)!=e)throw Error("string ".concat(JSON.stringify(n)," doesn't start with prefix ").concat(JSON.stringify(e),"; this is a bug"));return r+n.slice(e.length)}function N(n,e,r){if(!e)return n+r;if(n.slice(-e.length)!=e)throw Error("string ".concat(JSON.stringify(n)," doesn't end with suffix ").concat(JSON.stringify(e),"; this is a bug"));return n.slice(0,-e.length)+r}function L(n,e){return k(n,e,"")}function O(n,e){return N(n,e,"")}function U(n,e){return e.slice(0,re(n,e))}function re(n,e){var r=0;n.length>e.length&&(r=n.length-e.length);var t=e.length;n.length<e.length&&(t=n.length);var u=Array(t),o=0;u[0]=0;for(var i=1;i<t;i++){for(e[i]==e[o]?u[i]=u[o]:u[i]=o;o>0&&e[i]!=e[o];)o=u[o];e[i]==e[o]&&o++}o=0;for(var a=r;a<n.length;a++){for(;o>0&&n[a]!=e[o];)o=u[o];n[a]==e[o]&&o++}return o}var $="a-zA-Z0-9_\\u{C0}-\\u{FF}\\u{D8}-\\u{F6}\\u{F8}-\\u{2C6}\\u{2C8}-\\u{2D7}\\u{2DE}-\\u{2FF}\\u{1E00}-\\u{1EFF}",te=new RegExp("[".concat($,"]+|\\s+|[^").concat($,"]"),"ug"),D=new p;D.equals=function(n,e,r){return r.ignoreCase&&(n=n.toLowerCase(),e=e.toLowerCase()),n.trim()===e.trim()};D.tokenize=function(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r;if(e.intlSegmenter){if(e.intlSegmenter.resolvedOptions().granularity!="word")throw new Error('The segmenter passed must have a granularity of "word"');r=Array.from(e.intlSegmenter.segment(n),function(o){return o.segment})}else r=n.match(te)||[];var t=[],u=null;return r.forEach(function(o){/\s/.test(o)?u==null?t.push(o):t.push(t.pop()+o):/\s/.test(u)?t[t.length-1]==u?t.push(t.pop()+o):t.push(u+o):t.push(o),u=o}),t};D.join=function(n){return n.map(function(e,r){return r==0?e:e.replace(/^\s+/,"")}).join("")};D.postProcess=function(n,e){if(!n||e.oneChangePerToken)return n;var r=null,t=null,u=null;return n.forEach(function(o){o.added?t=o:o.removed?u=o:((t||u)&&X(r,u,t,o),r=o,t=null,u=null)}),(t||u)&&X(r,u,t,null),n};function oe(n,e,r){return D.diff(n,e,r)}function X(n,e,r,t){if(e&&r){var u=e.value.match(/^\s*/)[0],o=e.value.match(/\s*$/)[0],i=r.value.match(/^\s*/)[0],a=r.value.match(/\s*$/)[0];if(n){var l=H(u,i);n.value=N(n.value,i,l),e.value=L(e.value,l),r.value=L(r.value,l)}if(t){var c=Q(o,a);t.value=k(t.value,a,c),e.value=O(e.value,c),r.value=O(r.value,c)}}else if(r)n&&(r.value=r.value.replace(/^\s*/,"")),t&&(t.value=t.value.replace(/^\s*/,""));else if(n&&t){var f=t.value.match(/^\s*/)[0],m=e.value.match(/^\s*/)[0],x=e.value.match(/\s*$/)[0],g=H(f,m);e.value=L(e.value,g);var h=Q(L(f,g),x);e.value=O(e.value,h),t.value=k(t.value,f,h),n.value=N(n.value,f,f.slice(0,f.length-h.length))}else if(t){var d=t.value.match(/^\s*/)[0],C=e.value.match(/\s*$/)[0],E=U(C,d);e.value=O(e.value,E)}else if(n){var I=n.value.match(/\s*$/)[0],z=e.value.match(/^\s*/)[0],v=U(I,z);e.value=L(e.value,v)}}var ue=new p;ue.tokenize=function(n){var e=new RegExp("(\\r?\\n)|[".concat($,"]+|[^\\S\\n\\r]+|[^").concat($,"]"),"ug");return n.match(e)||[]};var M=new p;M.tokenize=function(n,e){e.stripTrailingCr&&(n=n.replace(/\r\n/g,`
`));var r=[],t=n.split(/(\n|\r\n)/);t[t.length-1]||t.pop();for(var u=0;u<t.length;u++){var o=t[u];u%2&&!e.newlineIsToken?r[r.length-1]+=o:r.push(o)}return r};M.equals=function(n,e,r){return r.ignoreWhitespace?((!r.newlineIsToken||!n.includes(`
`))&&(n=n.trim()),(!r.newlineIsToken||!e.includes(`
`))&&(e=e.trim())):r.ignoreNewlineAtEof&&!r.newlineIsToken&&(n.endsWith(`
`)&&(n=n.slice(0,-1)),e.endsWith(`
`)&&(e=e.slice(0,-1))),p.prototype.equals.call(this,n,e,r)};var ie=new p;ie.tokenize=function(n){return n.split(/(\S.+?[.!?])(?=\s+|$)/)};var se=new p;se.tokenize=function(n){return n.split(/([{}:;,]|\s+)/)};function q(n){"@babel/helpers - typeof";return q=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q(n)}var j=new p;j.useLongestToken=!0;j.tokenize=M.tokenize;j.castInput=function(n,e){var r=e.undefinedReplacement,t=e.stringifyReplacer,u=t===void 0?function(o,i){return typeof i=="undefined"?r:i}:t;return typeof n=="string"?n:JSON.stringify(R(n,null,null,u),u,"  ")};j.equals=function(n,e,r){return p.prototype.equals.call(j,n.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"),r)};function R(n,e,r,t,u){e=e||[],r=r||[],t&&(n=t(u,n));var o;for(o=0;o<e.length;o+=1)if(e[o]===n)return r[o];var i;if(Object.prototype.toString.call(n)==="[object Array]"){for(e.push(n),i=new Array(n.length),r.push(i),o=0;o<n.length;o+=1)i[o]=R(n[o],e,r,t,u);return e.pop(),r.pop(),i}if(n&&n.toJSON&&(n=n.toJSON()),q(n)==="object"&&n!==null){e.push(n),i={},r.push(i);var a=[],l;for(l in n)Object.prototype.hasOwnProperty.call(n,l)&&a.push(l);for(a.sort(),o=0;o<a.length;o+=1)l=a[o],i[l]=R(n[l],e,r,t,l);e.pop(),r.pop()}else i=n;return i}var J=new p;J.tokenize=function(n){return n.slice()};J.join=J.removeEmpty=function(n){return n};function le(){const[n,e]=F.useState(null);return F.useEffect(()=>{(window._correctorEvents||(window._correctorEvents=new Y)).on("set-selected-match",t=>{e(t)})},[]),n?s.jsx(s.Fragment,{children:s.jsx("style",{children:`
            [data-match-id="${n}"] {
                border-bottom: purple solid 3px;
                  }
        `})}):s.jsx(s.Fragment,{})}const ae=()=>s.jsxs(ee,{children:[s.jsx("div",{className:"paraphrase-area",style:{maxWidth:"768px",margin:"auto"},children:s.jsx("div",{children:s.jsx(fe,{})})}),s.jsx(le,{})]});function fe(){const{state:n,setParaphraseText:e}=W();return F.useEffect(()=>{(window._correctorEvents||(window._correctorEvents=new Y)).on("set-text",t=>{e(t.segment)})},[e]),n?s.jsxs(s.Fragment,{children:[s.jsx("h2",{children:n.text}),s.jsx(ce,{alternatives:n.alternatives})]}):s.jsx(s.Fragment,{})}function ce({alternatives:n}){if(n)return s.jsxs(s.Fragment,{children:[s.jsx("h3",{children:"Alternatives:"}),s.jsx("ul",{children:n.map((e,r)=>{const t=`alt-${r}`;return s.jsx(me,Z({parentKey:t},e),t)})})]})}function ve(n,e,r){return oe(e,r).map((u,o)=>{const i=`${n}-${o}`;return u.added?s.jsx("span",{style:{fontWeight:"bold"},children:u.value},i):u.removed?s.jsx(s.Fragment,{}):s.jsx("span",{style:{color:"black"},children:u.value},i)})}function me({text:n,parentKey:e}){const{selectAlternative:r,state:t}=W();if(!t)return s.jsx(s.Fragment,{});const u=ve(e,t.text,n);return s.jsx("li",{children:s.jsx("a",{style:{color:"black"},onClick:o=>{r(n),o.preventDefault()},children:u})})}const he=document.getElementById("paraphrase"),pe=ne(he);pe.render(s.jsx(ae,{}));
//# sourceMappingURL=paraphrase.js.map
