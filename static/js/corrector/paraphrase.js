var B=Object.defineProperty;var A=Object.getOwnPropertySymbols;var Z=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var M=(n,e,t)=>e in n?B(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,R=(n,e)=>{for(var t in e||(e={}))Z.call(e,t)&&M(n,t,e[t]);if(A)for(var t of A(e))G.call(e,t)&&M(n,t,e[t]);return n};import{j as u,P as H,u as J,a as Q,E as U,h as X}from"./client.js";function m(){}m.prototype={diff:function(e,t){var o,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=i.callback;typeof i=="function"&&(r=i,i={}),this.options=i;var s=this;function f(c){return r?(setTimeout(function(){r(void 0,c)},0),!0):c}e=this.castInput(e),t=this.castInput(t),e=this.removeEmpty(this.tokenize(e)),t=this.removeEmpty(this.tokenize(t));var l=t.length,p=e.length,d=1,a=l+p;i.maxEditLength&&(a=Math.min(a,i.maxEditLength));var C=(o=i.timeout)!==null&&o!==void 0?o:1/0,T=Date.now()+C,v=[{oldPos:-1,lastComponent:void 0}],h=this.extractCommon(v[0],t,e,0);if(v[0].oldPos+1>=p&&h+1>=l)return f([{value:this.join(t),count:t.length}]);var E=-1/0,y=1/0;function $(){for(var c=Math.max(E,-d);c<=Math.min(y,d);c+=2){var x=void 0,g=v[c-1],w=v[c+1];g&&(v[c-1]=void 0);var j=!1;if(w){var W=w.oldPos-c;j=w&&0<=W&&W<l}var q=g&&g.oldPos+1<p;if(!j&&!q){v[c]=void 0;continue}if(!q||j&&g.oldPos+1<w.oldPos?x=s.addToPath(w,!0,void 0,0):x=s.addToPath(g,void 0,!0,1),h=s.extractCommon(x,t,e,c),x.oldPos+1>=p&&h+1>=l)return f(Y(s,x.lastComponent,t,e,s.useLongestToken));v[c]=x,x.oldPos+1>=p&&(y=Math.min(y,c-1)),h+1>=l&&(E=Math.max(E,c+1))}d++}if(r)(function c(){setTimeout(function(){if(d>a||Date.now()>T)return r();$()||c()},0)})();else for(;d<=a&&Date.now()<=T;){var O=$();if(O)return O}},addToPath:function(e,t,o,i){var r=e.lastComponent;return r&&r.added===t&&r.removed===o?{oldPos:e.oldPos+i,lastComponent:{count:r.count+1,added:t,removed:o,previousComponent:r.previousComponent}}:{oldPos:e.oldPos+i,lastComponent:{count:1,added:t,removed:o,previousComponent:r}}},extractCommon:function(e,t,o,i){for(var r=t.length,s=o.length,f=e.oldPos,l=f-i,p=0;l+1<r&&f+1<s&&this.equals(t[l+1],o[f+1]);)l++,f++,p++;return p&&(e.lastComponent={count:p,previousComponent:e.lastComponent}),e.oldPos=f,l},equals:function(e,t){return this.options.comparator?this.options.comparator(e,t):e===t||this.options.ignoreCase&&e.toLowerCase()===t.toLowerCase()},removeEmpty:function(e){for(var t=[],o=0;o<e.length;o++)e[o]&&t.push(e[o]);return t},castInput:function(e){return e},tokenize:function(e){return e.split("")},join:function(e){return e.join("")}};function Y(n,e,t,o,i){for(var r=[],s;e;)r.push(e),s=e.previousComponent,delete e.previousComponent,e=s;r.reverse();for(var f=0,l=r.length,p=0,d=0;f<l;f++){var a=r[f];if(a.removed){if(a.value=n.join(o.slice(d,d+a.count)),d+=a.count,f&&r[f-1].added){var T=r[f-1];r[f-1]=r[f],r[f]=T}}else{if(!a.added&&i){var C=t.slice(p,p+a.count);C=C.map(function(h,E){var y=o[d+E];return y.length>h.length?y:h}),a.value=n.join(C)}else a.value=n.join(t.slice(p,p+a.count));p+=a.count,a.added||(d+=a.count)}}var v=r[l-1];return l>1&&typeof v.value=="string"&&(v.added||v.removed)&&n.equals("",v.value)&&(r[l-2].value+=v.value,r.pop()),r}function _(n,e){if(typeof n=="function")e.callback=n;else if(n)for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e}var N=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,P=/\S/,F=new m;F.equals=function(n,e){return this.options.ignoreCase&&(n=n.toLowerCase(),e=e.toLowerCase()),n===e||this.options.ignoreWhitespace&&!P.test(n)&&!P.test(e)};F.tokenize=function(n){for(var e=n.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),t=0;t<e.length-1;t++)!e[t+1]&&e[t+2]&&N.test(e[t])&&N.test(e[t+2])&&(e[t]+=e[t+2],e.splice(t+1,2),t--);return e};function k(n,e,t){return t=_(t,{ignoreWhitespace:!0}),F.diff(n,e,t)}var V=new m;V.tokenize=function(n){this.options.stripTrailingCr&&(n=n.replace(/\r\n/g,`
`));var e=[],t=n.split(/(\n|\r\n)/);t[t.length-1]||t.pop();for(var o=0;o<t.length;o++){var i=t[o];o%2&&!this.options.newlineIsToken?e[e.length-1]+=i:(this.options.ignoreWhitespace&&(i=i.trim()),e.push(i))}return e};var K=new m;K.tokenize=function(n){return n.split(/(\S.+?[.!?])(?=\s+|$)/)};var b=new m;b.tokenize=function(n){return n.split(/([{}:;,]|\s+)/)};function D(n){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?D=function(e){return typeof e}:D=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(n)}var S=Object.prototype.toString,L=new m;L.useLongestToken=!0;L.tokenize=V.tokenize;L.castInput=function(n){var e=this.options,t=e.undefinedReplacement,o=e.stringifyReplacer,i=o===void 0?function(r,s){return typeof s=="undefined"?t:s}:o;return typeof n=="string"?n:JSON.stringify(z(n,null,null,i),i,"  ")};L.equals=function(n,e){return m.prototype.equals.call(L,n.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"))};function z(n,e,t,o,i){e=e||[],t=t||[],o&&(n=o(i,n));var r;for(r=0;r<e.length;r+=1)if(e[r]===n)return t[r];var s;if(S.call(n)==="[object Array]"){for(e.push(n),s=new Array(n.length),t.push(s),r=0;r<n.length;r+=1)s[r]=z(n[r],e,t,o,i);return e.pop(),t.pop(),s}if(n&&n.toJSON&&(n=n.toJSON()),D(n)==="object"&&n!==null){e.push(n),s={},t.push(s);var f=[],l;for(l in n)n.hasOwnProperty(l)&&f.push(l);for(f.sort(),r=0;r<f.length;r+=1)l=f[r],s[l]=z(n[l],e,t,o,l);e.pop(),t.pop()}else s=n;return s}var I=new m;I.tokenize=function(n){return n.slice()};I.join=I.removeEmpty=function(n){return n};const ee=()=>u.jsx(H,{children:u.jsx("div",{className:"paraphrase-area",style:{maxWidth:"768px",margin:"auto"},children:u.jsx("div",{children:u.jsx(ne,{})})})});function ne(){const{state:n,setParaphraseText:e}=J();return Q.useEffect(()=>{(window._correctorEvents||(window._correctorEvents=new U)).on("set-text",o=>{e(o.segment)})},[]),n?u.jsxs(u.Fragment,{children:[u.jsx("h2",{children:n.text}),u.jsx(te,{alternatives:n.alternatives})]}):u.jsx(u.Fragment,{})}function te({alternatives:n}){if(n)return u.jsxs(u.Fragment,{children:[u.jsx("h3",{children:"Alternatives:"}),u.jsx("ul",{children:n.map((e,t)=>u.jsx(oe,R({},e),`alt-${t}`))})]})}function re(n,e){return k(n,e).map((o,i)=>{if(o.added){const s="bold";return u.jsx("span",{style:{fontWeight:s},children:o.value},i)}if(o.removed)return u.jsx(u.Fragment,{});const r="black";return u.jsx("span",{style:{color:r},children:o.value},i)})}function oe({text:n}){const{selectAlternative:e,state:t}=J();if(!t)return u.jsx(u.Fragment,{});const o=re(t.text,n);return u.jsx("li",{children:u.jsx("a",{style:{color:"black"},onClick:i=>{e(n),i.preventDefault()},children:o})})}const ie=document.getElementById("paraphrase"),se=X(ie);se.render(u.jsx(ee,{}));
//# sourceMappingURL=paraphrase.js.map
